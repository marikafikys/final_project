# Итоговый проект

## Что сделано:

1. Обновление библиотек до актуальных версий, устранение ошибок, сборка и запуск проекта.

   Было:
   <img src="public/1.1.png" width="300" />

   Стало:
   <img src="public/1.2.png" width="300" />

2. Портальная модалка (через createPortal) с работающим ESC/overlay.

<img src="public/2.png" width="300" />

3. Изменение структуры проекта согласно FSD.

   Было:
   <img src="public/3.1.png" width="300" />

   Стало:
   <img src="public/3.2.png" width="300" />

4. Внедрение хука useTransition для поиска и сортировки товаров.

<img src="public/4.png" width="500" />

5. Использование useRef для хранения состояния и установки автофокуса.

- Замена useDebounce на useRef + setTimeout (например, для избежания зависимости от кастомного хука/библиотеки), useRef хранит ID таймера.

  Было:
  <img src="public/5.1.1.png" width="500" />

  Стало:
  <img src="public/5.1.2.png" width="500" />

- Хранение в useRef постоянной ссылки на DOM-элемент для установки автофокуса.
  <img src="public/5.2.1.png" width="500" />

   <img src="public/5.2.2.png" width="500" />

6. Оптимизация рендеров.

Сортировка до оптимизации:

- Время коммита: 2.1 с
- Общее время рендера ProductList: 24.3 мс
- Рендер Header: 2.5 мс
- Рендер CardList: 1.6 мс

<img src="public/6.1.png" width="500" />

Сортировка после оптимизации:

- Время коммита: 2.0 с (общая производительность приложения улучшилась)
- Общее время рендера ProductList: 21.1 мс (время рендера UI уменьшилось)
- Рендер Header не перерисовался благодаря memo
- Рендер CardList: 1 мс
- Появился Anonymous (Memo) — успешная мемоизация

<img src="public/6.2.png" width="500" />

7. Альтернативная сборка Vite

- Запуск сборки Webpack:
  rm -rf dist && time NODE_ENV=production npx webpack --config webpack/webpack.config.js --env env=prod

  Время сборки: 24.17 c
  Размер: 611 kB (нет gzip)

<img src="public/7.1.png" width="500" />

- Запуск сборки Vite:
  rm -rf dist && time npm run build

  Время сборки: 11.80 c (быстрее на ~50%)
  Размер: 717.79 kB (gzip: 233.68 kB)

<img src="public/7.2.png" width="500" />

## Чек-лист:

1. Архитектура и структура — 4 балла

- [x] shared/ui только презентационные компоненты, без стора и API (2)
- [x] Изоляция фич по папкам, слои shared/, features/, pages/ соблюдены (1)
- [x] Устранены лишние prop-chains (1)

2. Оптимизация рендеров — 4 балла

- [x] Profiler: найден hotspot и описан кратко (1)
- [x] Уместный React.memo (1.5)
- [x] Точечные useMemo/useCallback для тяжелых вычислений/колбэков в списках (1.5)

3. React.Portal (модалка, доступность) — 3 балла

- [x] Портал работает, #modal-root добавлен, ESC/overlay обрабатываются (2)
- [x] Корректный фокус: установка при открытии, возврат на триггер (1)

4. useRef — 2 балла

- [x] Хранение состояния между рендерами без лишних рендеров (1)
- [x] Автофокус/DOM-интеракция (1)

5. Альтернативная сборка (esbuild/SWC/Vite) — 2 балла

- [x] Рабочая сборка (1)
- [x] Сравнение с Webpack в README (время/размер, краткий вывод) (1)

1. React 19 hooks — 3 балла

- [x] Реальный UX-кейс с одним из хуков (2)
- [ ] Обработка ошибок/ресет/оптимистичность (1)

1. README и демо — 2 балла

- [x] «Что сделано» + «Структура папок» (1)
- [x] GIF или скриншот модалки и формы/оптимистичного UI + цифры сравнения сборок (1)

### Обязательные условия (без них — незачет)

- [x] Проект собирается и запускается (любой из сборщиков).
- [x] Портальная модалка (через createPortal) с работающим ESC/overlay.
- [x] Одна фича на React 19 на реальном UX-кейсе.
- [x] README: «Что сделано», «Структура», сравнение сборок (цифры), демо-скрины/гифы.
